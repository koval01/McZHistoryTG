function mediaError(e){return e.onerror="",e.src="",!0}$(document).ready(function(){function e(e){const t=Date.parse(e),n=(new Date).getTimezoneOffset(),o=60*Math.abs(n)*1e3+t;return new Date(o).toLocaleString()}function t(e){var t=[];function n(e,n){t.push({m_type:n,m_url:e})}function o(e,t){for(let o=0;o<e.length;o++){let a=null;const r=$("<div></div>");r.html(e[o]),"image"==t?a=$(".tgme_widget_message_photo_wrap",r).css("background-image").replace(/url\(\"/g,"").replace(/\"\)/g,""):"video"==t&&(a=$(".tgme_widget_message_video",r).attr("src")),n(a,t)}}try{o($(".tgme_widget_message_photo_wrap",e),"image")}catch(e){console.log(`Images extract catch: ${e}`)}try{o($(".tgme_widget_message_video",e),"video")}catch(e){console.log(`Videos extract catch: ${e}`)}return console.log(t),t}function n(e){const t=e.media.data,n=e.meta.views,o=e.meta.time,a=e.data_post;let r=e.post_text;r||(r="");const s=`\n            <div class="col" style="margin-bottom:0.7em;padding-right:8px!important;padding-left:8px!important">\n                <div class="card shadow-sm">\n                    ${function(e){let t="";for(let n=0;n<e.length;n++)e[n].m_url&&("image"==e[n].m_type?t=`${t}\n${`\n                    <img src="${e[n].m_url}" onerror="mediaError(this);" class="bd-placeholder-img card-img-top" \n                        width="100%" height="100%" role="img" title="Фото" aria-label="Фото" \n                        style="margin-bottom:0.4em;border-radius:3px!important">`}`:"video"==e[n].m_type&&(t=`${t}\n${`\n                    <video src="${e[n].m_url}" onerror="mediaError(this);" class="bd-placeholder-img card-img-top" \n                        width="100%" height="100%" role="img" title="Видео" aria-label="Видео" \n                        style="margin-bottom:0.4em;border-radius:3px!important"></video>`}`));return t}(t)}\n                    <div class="card-body">\n                        <p class="card-text" style="margin-top:-0.8em">${r}</p>\n                        <div class="d-flex justify-content-between align-items-center">\n                            <small class="text-muted">\n                                <span class="post_views">${n}</span> | \n                                ${o} | \n                                <a href="https://t.me/${a}" target="_blank">В TG</a>\n                                <br/>by Elon Tusk\n                            </small>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `;console.log(`Result pattern: ${s}`),$(".row-global-block").append(s)}!function(o=null){!function(e,t=null){$.ajax({url:`https://zlpnews.herokuapp.com/?before=${t}`,type:"GET",success:function(t){t.success?e(t.body.toString().replace(/\\n/g,"").replace(/\\"/g,'"').replace(/\\/g,"")):console.log("Check error! (get_channel_html_data)")},error:function(){console.log("Error get channel data!")}})}(function(o){const a=$("<div></div>");a.html(o);const r=function(n){console.log(`Len els: ${n.length}`);let o=[];for(let a=0;a<n.length;a++){console.log(n[a]);const r=$("<div></div>");r.html(n[a]);const s=$(".tgme_widget_message_text",r).html(),l=$(".tgme_widget_message_views",r).html(),i=$(".tgme_widget_message",r).attr("data-post"),c=e($(".time",r).attr("datetime")),m=t(r);o.push({post_text:s,meta:{views:l,time:c},media:{data:m},data_post:i})}return o.reverse()}($(".tgme_widget_message_wrap",a));for(let e=0;e<r.length;e++)console.log(r[e]),n(r[e])},bef_=o)}()});
